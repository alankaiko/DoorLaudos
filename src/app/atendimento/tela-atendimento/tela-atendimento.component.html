<div class="conteudos">
  <p-fieldset legend="{{ editando ? 'Editar' : 'Novo'}} Atendimento">
    <div class="classecad">
      <form autocomplete="off" [formGroup]="formulario" (ngSubmit)="Salvar()" class="formu">
        <div class="p-grid">
          <div class="ui-g-3 ui-fluid">
            <label>Código Atend.</label>
            <input [readonly]= "true" type="text" pInputText ng-model="text" name="codigo" formControlName="codigo">
          </div>

          <div class="ui-g-9 ui-fluid">
            <label>Data Atend.</label>
            <p-calendar  dateFormat="dd/mm/yy" [monthNavigator]="true" [yearNavigator]="true" formControlName="dataatendimento"
                yearRange="1930:2020" name="dataatendimento"></p-calendar>
          </div>

          <div class="ui-g-12 ui-fluid" formGroupName="paciente">
            <label>Paciente</label>
            <p-dropdown [options]="pacientes" [autoWidth]="false" [filter]="true"  formControlName="idpatient"
              placeholder="Selecione..." name="idpatient" (onChange)="CarregarPacientes()"></p-dropdown>
          </div>

          <div class="ui-g-12 ui-fluid" formGroupName="convenio">
            <label>Convênio</label>
            <p-dropdown [options]="convenios" [autoWidth]="false" [filter]="true"  formControlName="codigo"
              placeholder="Selecione..." name="codigo" (onChange)="CarregarConvenios()"></p-dropdown>
          </div>

          <div class="ui-g-12 ui-fluid" formGroupName="solicitante">
            <label>Prof. Solicitante</label>
            <p-dropdown [options]="solicitantes" [autoWidth]="false" [filter]="true"  formControlName="codigo"
              placeholder="Selecione..." name="codigo" (onChange)="CarregarSolicitantes()"></p-dropdown>
          </div>

          <div class="ui-g-12 ui-fluid">
            <label>Observações</label>
            <input type="text" pInputText ng-model="text" name="observacoes" formControlName="observacoes">
          </div>

          <div class="ui-g-12">
            <p-panel header="Procedimentos">
              <app-procedimento-cad-apend [procedimentos]="atendimento.procedimentos"></app-procedimento-cad-apend>
            </p-panel>
          </div>

          <div class="ui-g-12 ui-fluid">
            <div style="text-align: left;">
              <button class="btn btn-primary" type="submit" style="margin-right: 8px;">Salvar</button>
              <button class="btn btn-outline-secondary" routerLink="/abreviaturas">Cancelar</button>
            </div>

            <div style="text-align: right;">
              <a routerLink="/atendimento">Voltar para a pesquisa</a>
            </div>
          </div>
        </div>
      </form>
    </div>
  </p-fieldset>
</div>
